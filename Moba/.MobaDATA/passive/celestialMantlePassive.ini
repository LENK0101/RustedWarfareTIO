[core]
@global baseDamage: 10
@global defenceScale: 2
@global hpScale: 0.005

copyFrom: ROOT:/Moba/.MobaDATA/stats.template
name: celestialMantlePassive
tags: celestialMantle
hideScorchMark: true
showInEditor: false
price: 0
maxHp:1
mass: 3000
radius:0
displayRadius:0
disableAllUnitCollisions: true
canNotBeDamaged:true
canNotBeDirectlyAttacked:true
isUnselectable:true
fogOfWarSightRange:0
showOnMinimap:false
techLevel: 1
explodeOnDeath:false


[hiddenAction_initialize]
autoTriggerOnEvent:created
sendMessageTo: parent
sendMessageWithTags: celestialMantlePassiveMark

[hiddenAction_active]
autoTriggerOnEvent:newMessage(withTag='celestialMantlePassiveActive')
setUnitStats:shootDamageMultiplier = (${baseDamage} + parent.resource.TotalDefence * ${defenceScale} + parent.maxHp() * ${hpScale}) / 100

[hiddenAction_attackTarget1]
autoTriggerOnEvent: newMessage(withTag='celestialMantlePassiveAttack')
fireTurretXAtGround: passiveAttack
fireTurretXAtGround_withProjectile: passiveAttack
fireTurretXAtGround_withTarget: parent.lastDamagedBy

[hiddenAction_attackTarget2]
autoTriggerOnEvent: newMessage(withTag='celestialMantlePassiveSkill')
fireTurretXAtGround: passiveAttack
fireTurretXAtGround_withProjectile: passiveAttack
fireTurretXAtGround_withTarget: parent.lastDamagedBy.customTarget1

[hiddenAction_notify]
autoTriggerOnEvent:newMessage(withTag='deadPrice')
sendMessageTo:parent
sendMessageWithTags:deadPrice
sendMessageWithData: price = eventData(name='price',type='float')

[graphics]
image:        ROOT:/DATA/total/null.png
disableLowHpFire: true
disableLowHpSmoke: true

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits: false
canAttackUnderwaterUnits: false
isFixedFiring: false
turretMultiTargeting: true
turretSize: 0
turretTurnSpeed: 999
maxAttackRange: 9999
shootDelay: 1s


[turret_passiveAttack]
invisible: true
x: 0
y:0
idleDir:0
projectile: passiveAttack
turnSpeed:99999
turnSpeedAcceleration:999
shoot_sound: ROOT:/Moba/.MobaDATA/sfx/celestialMantlePassiveAttack.ogg
shoot_sound_vol:0.15

[projectile_passiveAttack]
areaDamage:100
areaRadius:1
armourIgnoreAmount: 100
areaRadiusFromEdge: true
areaDamageNoFalloff: true
life:5
instant: true
drawSize: 1
explodeEffect:NONE
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
color: #B00000
lightingEffect: true
lightColor: #B00000
lightSize: 2
hitSound: true

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
targetHeight: 0
targetHeightDrift: 0
