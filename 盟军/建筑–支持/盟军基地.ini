
[core]
name: 盟军基地
price: 0
maxHp: 2500
mass: 100000
radius: 80

copyFrom: ROOT:\共享文件\3类\阵营建筑共同.template
tags: 原始护甲, 建筑重甲, 建筑, 盟军, 基地, 电力, 可入侵, 占领, 空下, 非防御建筑, 盟军基地, allied
displayText: Allied Construction Yard
displayText_zh: 盟军基地
displayDescription: Build allied buildings\nPower: +40
displayDescription_zh: 建造盟军建筑\n电力提供：40
isBuilding: true
footprint: -3,-1,4,2
#displayFootprint: -3,-1,4,2
constructionFootprint: -3,-1,4,2
fogOfWarSightRange: 26
numBitsOnDeath:100
canRepairBuildings: true
canRepairUnitsOnlyWithTags: 无
nanoRange: 9999
nanoRepairSpeed: 0
selfBuildRate: 0s
borrowResourcesWhileAlive: 电力=-40
armour: 99999
armourMinDamageToKeep: 1700
#exit_x:0
#exit_y:30
#exit_dirOffset: 45
#exit_moveAwayAmount :100
effectOnDeath: CUSTOM:土坑3*4, CUSTOM:土坑2*4, CUSTOM:土坑, CUSTOM:炸毁, CUSTOM:炸毁2, CUSTOM:炸毁3, CUSTOM:炸毁4, CUSTOM:炸毁5


[graphics]
image:       盟军基地.png

imageScale:	0.8
image_offsetX: 9    
image_offsetY: -35
#image_back:   NONE
#image_wreak:  NONE
rotate_with_direction: false
repairEffect: NONE


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:  false
canAttackUnderwaterUnits: false


[movement]
movementType: NONE

[canBuild_1]
#@copyFromSection: canBuild_1
name: 盟军发电厂
pos: 2
#tech: 1
#forceNano: true
isVisible: if self.resource(type='计数', equalTo=1) and self.hasFlag(id=0)
addResources: 计数=-1, ai计时=-99
price: 资金=800
isGuiBlinking: true


[canBuild_2]
name: 盟军矿厂
pos: 3
isVisible: if self.resource(type='计数', equalTo=2) and self.hasFlag(id=0)
addResources: 计数=-2, ai计时=-99
price: 资金=2000
isGuiBlinking: true


[canBuild_3]
name: 盟军兵营
pos: 4
isVisible: if self.resource(type='计数', equalTo=3) and self.hasFlag(id=0) 
addResources: 计数=-3, ai计时=-99
price: 资金=500
isGuiBlinking: true


[canBuild_4]
name: 盟军战争工厂
pos: 5
isVisible: if self.resource(type='计数', equalTo=4) and self.hasFlag(id=0)
addResources: 计数=-4, ai计时=-99
price: 资金=2000
isGuiBlinking: true


[canBuild_5]
name: 盟军机场
pos: 6
isVisible: if self.resource(type='计数', equalTo=5) and self.hasFlag(id=0)
addResources: 计数=-5, ai计时=-99
price: 资金=1500
isGuiBlinking: true


[canBuild_6]
name: 盟军船坞
pos: 7
isVisible: if self.resource(type='计数', equalTo=6) and self.hasFlag(id=0)
addResources: 计数=-6, ai计时=-99
price: 资金=1200
isGuiBlinking: true


[canBuild_7]
name: 科技中心
pos: 8
isVisible: if self.resource(type='计数', equalTo=7) and self.hasFlag(id=0)
addResources: 计数=-7, ai计时=-99
price: 资金=3000
isGuiBlinking: true


[canBuild_8]
name: 矿石精炼器
pos: 9
isVisible: if self.resource(type='计数', equalTo=8) and self.hasFlag(id=0)
isLocked: if self.hasUnitInTeam(withTag='矿石精炼器', incompleteBuildings=true)
isLockedMessage: Allied Ore Purifier can only have one at a time!
isLockedMessage_zh: 矿石精炼器同时只能有一个!
addResources: 计数=-8, ai计时=-99
price: 资金=3000
isGuiBlinking: true


[canBuild_9]
name: 盟军维修平台
pos: 10
isVisible: if self.resource(type='计数', equalTo=9) and self.hasFlag(id=0)
addResources: 计数=-9, ai计时=-99
price: 资金=900
isGuiBlinking: true


[canBuild_10]
name: 机枪碉堡
pos: 11
isVisible: if self.resource(type='计数', equalTo=10) and self.hasFlag(id=2)
addResources: 计数=-10, ai计时=-99
price: 资金=400
isGuiBlinking: true


[canBuild_11]
name: 定点炮塔
pos: 12
isVisible: if self.resource(type='计数', equalTo=11) and self.hasFlag(id=2)
addResources: 计数=-11, ai计时=-99
price: 资金=600
isGuiBlinking: true


[canBuild_12]
name: 爱国者导弹
pos: 13
isVisible: if self.resource(type='计数', equalTo=12) and self.hasFlag(id=2)
addResources: 计数=-12, ai计时=-99
price: 资金=800
isGuiBlinking: true


[canBuild_13]
name: 光棱塔
pos: 14
isVisible: if self.resource(type='计数', equalTo=13) and self.hasFlag(id=2)
addResources: 计数=-13, ai计时=-99
price: 资金=1200
isGuiBlinking: true


[canBuild_14]
name: 巨炮
pos: 15
isVisible: if self.resource(type='计数', equalTo=14) and self.hasFlag(id=2)
addResources: 计数=-14, ai计时=-99
price: 资金=1800
isGuiBlinking: true


[canBuild_15]
name: 盟军机场扩展跑道
pos: 16
isVisible: if self.resource(type='计数', equalTo=15) and self.hasFlag(id=2)
addResources: 计数=-15, ai计时=-99
price: 资金=800
isGuiBlinking: true


[canBuild_16]
name: 超时空传送仪
pos: 17
isVisible: if self.resource(type='计数', equalTo=16) and self.hasFlag(id=2)
isLocked: if self.hasUnitInTeam(withTag='超时空传送仪', incompleteBuildings=true)
isLockedMessage: Allied Chronosphere can only have one at a time!
isLockedMessage_zh: 超时空传送仪同时只能有一个!
addResources: 计数=-16, ai计时=-99
price: 资金=3000
isGuiBlinking: true


[canBuild_17]
name: 天气控制器
pos: 18
isVisible: if self.resource(type='计数', equalTo=17) and self.hasFlag(id=2)
isLocked: if self.hasUnitInTeam(withTag='天气控制器', incompleteBuildings=true)
isLockedMessage: Allied Weather Controller can only have one at a time!
isLockedMessage_zh: 天气控制器同时只能有一个!
addResources: 计数=-17, ai计时=-99
price: 资金=5000
isGuiBlinking: true


[action_1]
text: Undeploy
text_zh: 取消基地部署
description: Allied Mobile Construction Vehicle
description_zh: 整理形成基地车
buildSpeed: 0.2s
pos: 0.9
displayType: action
isActive: if not self.globalTeamTags(includes='禁止基地取消部署') and self.queueSize(empty=true) 
isVisible: if not self.isControlledByAI()
addResources: setFlag=3
whenBuilding_triggerAction: 卖声
convertTo: 盟军基地车


[action_支持]
text: Support
text_zh: 支持类
description: Expand the list of support buildings
description_zh: 展开支持类建筑列表
pos: 1.1
displayType: rally
buildSpeed: 0s
isActive: if self.queueSize(empty=true)
autoTrigger: if self.lastConverted(withinSeconds=1) 
isVisible: true
addResources: setFlag=0, unsetFlag=2, setFlag=3


[action_防御]
text: Defensive
text_zh: 防御类
description: Expand the list of defensive buildings
description_zh: 展开防御类建筑列表
pos: 1.2
displayType: rally
buildSpeed: 0s
isActive: if self.queueSize(empty=true) 
isVisible: true
addResources: setFlag=2, unsetFlag=0, setFlag=3


[action_取消]
text: Cancel
text_zh: 取消
description: Cancel process
description_zh: 取消建造
pos: 0.8
displayType: none
buildSpeed: 0s
autoTrigger: if self.resource(type='ai计时', greaterThan=9) and self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true)
isLocked: if not self.resource(type='计数', greaterThan=0)
addResources: setFlag=3
setResourcesWithLogic: 取消建造 = 1
resourceAmount: 计数
resourceAmount_setValue: 0
alsoTriggerAction: ai计时2

[action_维修2]
addResources: setFlag=31, setFlag=3

[action_维修2取消]
addResources: unsetFlag=31, setFlag=3

[action_卖钱]
addResources: setFlag=30, setFlag=14, setFlag=3

[action_卖钱2]
addResources: unsetFlag=30, unsetFlag=14, setFlag=3


[action_建1]
textAddUnitName: 盟军发电厂
descriptionAddFromUnit: 盟军发电厂
descriptionAddUnitStats: 盟军发电厂
displayType: none
pos: 2
buildSpeed: 8s
setResourcesWithLogic: 计数=1
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=1) and self.hasFlag(id=0)
unitShownInUI: 盟军发电厂
#ai_isHighPriority: true
ai_considerSameAsBuilding: 盟军发电厂



[action_建2]
textAddUnitName: 盟军矿厂
descriptionAddFromUnit: 盟军矿厂
descriptionAddUnitStats: 盟军矿厂
displayType: none
pos: 3
buildSpeed: 10s
setResourcesWithLogic: 计数=2
isLocked: if self.noUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=2) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
unitShownInUI: 盟军矿厂
ai_considerSameAsBuilding: 盟军矿厂


[action_建3]
textAddUnitName: 盟军兵营
descriptionAddFromUnit: 盟军兵营
descriptionAddUnitStats: 盟军兵营
displayType: none
pos: 4
buildSpeed: 5s
setResourcesWithLogic: 计数=3
isLocked: if self.noUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=3) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
unitShownInUI: 盟军兵营
ai_considerSameAsBuilding: 盟军兵营


[action_建4]
textAddUnitName: 盟军战争工厂
descriptionAddFromUnit: 盟军战争工厂
descriptionAddUnitStats: 盟军战争工厂
displayType: none
pos: 5
buildSpeed: 20s
setResourcesWithLogic: 计数=4
isLocked: if self.noUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
isLockedMessage: Require Allied Power Plant
isLockedMessage_zh: 解锁条件: 盟军发电厂
isLockedAlt: if self.noUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
isLockedAltMessage: Require Allied Ore Refinery
isLockedAltMessage_zh: 解锁条件: 盟军矿厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=4) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true) and self.hasUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
unitShownInUI: 盟军战争工厂
ai_considerSameAsBuilding: 盟军战争工厂


[action_建5]
textAddUnitName: 盟军机场
descriptionAddFromUnit: 盟军机场
descriptionAddUnitStats: 盟军机场
displayType: none
pos: 6
buildSpeed: 15s
setResourcesWithLogic: 计数=5
isLocked: if self.noUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
isLockedMessage: Require Allied Power Plant
isLockedMessage_zh: 解锁条件: 盟军发电厂
isLockedAlt: if self.noUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
isLockedAltMessage: Require Allied Ore Refinery
isLockedAltMessage_zh: 解锁条件: 盟军矿厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=5) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true) and self.hasUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
unitShownInUI: 盟军机场
ai_considerSameAsBuilding: 盟军机场


[action_建6]
textAddUnitName: 盟军船坞
descriptionAddFromUnit: 盟军船坞
descriptionAddUnitStats: 盟军船坞
displayType: none
pos: 7
buildSpeed: 15s
setResourcesWithLogic: 计数=6
isLocked: if self.noUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true)
isLockedMessage: Require Allied Power Plant
isLockedMessage_zh: 解锁条件: 盟军发电厂
isLockedAlt: if self.noUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
isLockedAltMessage: Require Allied Ore Refinery
isLockedAltMessage_zh: 解锁条件: 盟军矿厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=6) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军发电厂', incompleteBuildings=true) and self.hasUnitInTeam(withTag='盟军矿厂', incompleteBuildings=true)
unitShownInUI: 盟军船坞
ai_considerSameAsBuilding: 盟军船坞


[action_建7]
textAddUnitName: 科技中心
descriptionAddFromUnit: 科技中心
descriptionAddUnitStats: 科技中心
displayType: none
pos: 8
buildSpeed: 30s
setResourcesWithLogic: 计数=7
isLocked: if self.noUnitInTeam(withTag='盟军机场', incompleteBuildings=true)
isLockedMessage: Require Allied Airfield
isLockedMessage_zh: 解锁条件: 盟军机场
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true) and ((self.resource(type='Ai智商', greaterThan=70) and self.isControlledByAI()) or not self.isControlledByAI())
isVisible: if not self.resource(type='计数', equalTo=7) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军机场', incompleteBuildings=true)
unitShownInUI: 科技中心
ai_considerSameAsBuilding: 科技中心


[action_建8]
textAddUnitName: 矿石精炼器
descriptionAddFromUnit: 矿石精炼器
descriptionAddUnitStats: 矿石精炼器
displayType: none
pos: 9
buildSpeed: 30s
setResourcesWithLogic: 计数=8
isLocked: if self.noUnitInTeam(withTag='科技中心', incompleteBuildings=true)
isLockedMessage: Require Allied Tech Center
isLockedMessage_zh: 解锁条件: 科技中心
isLockedAlt: if self.hasUnitInTeam(withTag='矿石精炼器', factoryQueue=true)
isLockedAltMessage: Allied Ore Purifier can only have one at a time!
isLockedAltMessage_zh: 矿石精炼器同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=8) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true)
unitShownInUI: 矿石精炼器
ai_considerSameAsBuilding: 矿石精炼器


[action_建9]
textAddUnitName: 盟军维修平台
descriptionAddFromUnit: 盟军维修平台
descriptionAddUnitStats: 盟军维修平台
displayType: none
pos: 10
buildSpeed: 12s
setResourcesWithLogic: 计数=9
isLocked: if self.noUnitInTeam(withTag='盟军战争工厂', incompleteBuildings=true)
isLockedMessage: Require Allied War Factory
isLockedMessage_zh: 解锁条件: 盟军战争工厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=9) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='盟军战争工厂', incompleteBuildings=true)
unitShownInUI: 盟军维修平台
ai_considerSameAsBuilding: 盟军维修平台


[action_建10]
textAddUnitName: 机枪碉堡
descriptionAddFromUnit: 机枪碉堡
descriptionAddUnitStats: 机枪碉堡
displayType: none
pos: 11
buildSpeed: 4s
setResourcesWithLogic: 计数=10
isLocked: if self.noUnitInTeam(withTag='盟军兵营', incompleteBuildings=true)
isLockedMessage: Require Allied Barracks
isLockedMessage_zh: 解锁条件: 盟军兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=10) and self.hasFlag(id=2)
unitShownInUI: 机枪碉堡
ai_considerSameAsBuilding: 机枪碉堡


[action_建11]
textAddUnitName: 定点炮塔
descriptionAddFromUnit: 定点炮塔
descriptionAddUnitStats: 定点炮塔
displayType: none
pos: 12
buildSpeed: 6s
setResourcesWithLogic: 计数=11
isLocked: if self.noUnitInTeam(withTag='盟军兵营', incompleteBuildings=true)
isLockedMessage: Require Allied Barracks
isLockedMessage_zh: 解锁条件: 盟军兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=11) and self.hasFlag(id=2)
unitShownInUI: 定点炮塔
ai_considerSameAsBuilding: 定点炮塔


[action_建12]
textAddUnitName: 爱国者导弹
descriptionAddFromUnit: 爱国者导弹
descriptionAddUnitStats: 爱国者导弹
displayType: none
pos: 13
buildSpeed: 10s
setResourcesWithLogic: 计数=12
isLocked: if self.noUnitInTeam(withTag='盟军兵营', incompleteBuildings=true)
isLockedMessage: Require Allied Barracks
isLockedMessage_zh: 解锁条件: 盟军兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=12) and self.hasFlag(id=2)
unitShownInUI: 爱国者导弹
ai_considerSameAsBuilding: 爱国者导弹


[action_建13]
textAddUnitName: 光棱塔
descriptionAddFromUnit: 光棱塔
descriptionAddUnitStats: 光棱塔
displayType: none
pos: 14
buildSpeed: 10s
setResourcesWithLogic: 计数=13
isLocked: if self.noUnitInTeam(withTag='盟军机场', incompleteBuildings=true)
isLockedMessage: Require Allied Airfield
isLockedMessage_zh: 解锁条件: 盟军机场
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=13) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='盟军机场', incompleteBuildings=true)
unitShownInUI: 光棱塔
ai_considerSameAsBuilding: 光棱塔


[action_建14]
textAddUnitName: 巨炮
descriptionAddFromUnit: 巨炮
descriptionAddUnitStats: 巨炮
displayType: none
pos: 15
buildSpeed: 18s
setResourcesWithLogic: 计数=14
isLocked: if self.noUnitInTeam(withTag='科技中心', incompleteBuildings=true)
isLockedMessage: Require Allied Tech Center
isLockedMessage_zh: 解锁条件: 科技中心
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=14) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true)
unitShownInUI: 巨炮
ai_considerSameAsBuilding: 巨炮


[action_建15]
textAddUnitName: 盟军机场扩展跑道
descriptionAddFromUnit: 盟军机场扩展跑道
descriptionAddUnitStats: 盟军机场扩展跑道
displayType: none
pos: 16
buildSpeed: 10s
setResourcesWithLogic: 计数=15
isLocked: if self.noUnitInTeam(withTag='盟军机场', incompleteBuildings=true)
isLockedMessage: Require Allied Airfield
isLockedMessage_zh: 解锁条件1: 盟军机场
isLockedAlt: if self.noUnitInTeam(withTag='科技中心', incompleteBuildings=true)
isLockedAltMessage: Require Allied Tech Center
isLockedAltMessage_zh: 解锁条件2: 科技中心
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=15) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='盟军机场', incompleteBuildings=true) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true)
unitShownInUI: 盟军机场扩展跑道
ai_considerSameAsBuilding: 盟军机场扩展跑道


[action_建16]
textAddUnitName: 超时空传送仪
descriptionAddFromUnit: 超时空传送仪
descriptionAddUnitStats: 超时空传送仪
displayType: none
pos: 17
buildSpeed: 20s
setResourcesWithLogic: 计数=16
isLocked: if self.noUnitInTeam(withTag='科技中心', incompleteBuildings=true)
isLockedMessage: Require Allied Tech Center
isLockedMessage_zh: 解锁条件: 科技中心
isLockedAlt: if self.hasUnitInTeam(withTag='超时空传送仪', factoryQueue=true)
isLockedAltMessage: Allied Chronosphere can only have one at a time!
isLockedAltMessage_zh: 超时空传送仪同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=16) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true)
unitShownInUI: 超时空传送仪
ai_considerSameAsBuilding: 超时空传送仪


[action_建17]
textAddUnitName: 天气控制器
descriptionAddFromUnit: 天气控制器
descriptionAddUnitStats: 天气控制器
displayType: none
pos: 18
buildSpeed: 50s
setResourcesWithLogic: 计数=17
isLocked: if self.noUnitInTeam(withTag='科技中心', incompleteBuildings=true)
isLockedMessage: Require Allied Tech Center
isLockedMessage_zh: 解锁条件: 科技中心
isLockedAlt: if self.hasUnitInTeam(withTag='天气控制器', factoryQueue=true)
isLockedAltMessage: Allied Weather Controller can only have one at a time!
isLockedAltMessage_zh: 天气控制器同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=17) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true)
unitShownInUI: 天气控制器
ai_considerSameAsBuilding: 天气控制器


[hiddenAction_初始状态]
autoTrigger: if not (self.hasFlag(id=0) or self.hasFlag(id=2))
addResources: setFlag=0, unsetFlag=2


[hiddenAction_自动部署]
autoTriggerOnEvent: created
playSoundAtUnit: ROOT:\音频\语音+音效\uplace.wav


[hiddenAction_Ai战机守护]
autoTrigger: if self.isControlledByAI() and self.globalTeamTags(includes='战机守护Ai2') and (numberOfUnitsInEnemyTeam(greaterThan=4, withinRange=500) or (self.hasTakenDamage(withinSeconds=1) and not self.hp(full=true)))
removeGlobalTeamTags: 战机守护Ai2
#showMessageToAllPlayers: 发现敌人


[hiddenAction_Ai分基地限制]
requireConditional: if self.isControlledByAI() and self.hasUnitInTeam(withTag='基地')
autoTriggerOnEvent: created
addResources: setFlag=3
#showMessageToAllPlayers: 触发


[hiddenAction_Ai分基地限制2]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInTeam(withTag='基地', equalTo=1) and self.hasFlag(id=3)
addResources: unsetFlag=3
#showMessageToAllPlayers: 触发2


[hiddenAction_内部人员]
requireConditional: if self.globalTeamTags(includes='盟军')
autoTriggerOnEvent: destroyed
spawnUnits: 防卫大兵*3(offsetRandomX=50, offsetRandomY=50), 盟军工程师(offsetRandomX=20, offsetRandomY=20)


[hiddenAction_内部人员2]
requireConditional: if self.globalTeamTags(includes='苏联')
autoTriggerOnEvent: destroyed
spawnUnits: 动员兵*3(offsetRandomX=50, offsetRandomY=50), 苏联工程师(offsetRandomX=20, offsetRandomY=20)


[hiddenAction_ai设置]
autoTrigger: if self.isControlledByAI() and (not self.hasFlag(id=0) or not self.hasFlag(id=0) or not self.hasFlag(id=2))
addResources: setFlag=0, setFlag=1, setFlag=2


[hiddenAction_ai计时]
autoTrigger: if self.isControlledByAI() and self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true)
addResources: ai计时=1
#showMessageToAllPlayers: 1
#存在未知bug


[hiddenAction_ai计时2]
autoTrigger: if self.resource(type='ai计时', lessThan=0)
#showMessageToAllPlayers: 2
resourceAmount: ai计时
resourceAmount_setValue: 0


[hiddenAction_ai建造-船坞]
spawnUnits: 盟军船坞引子-Ai
#showMessageToAllPlayers: 产生引子
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='盟军发电厂') and self.hasUnitInTeam(withTag='盟军矿厂') and not self.hasUnitInTeam(withTag='盟军船坞引子') and numberOfUnitsInTeam(withTag='船坞', lessThan=2, withinRange=650)


[hiddenAction_ai建造-电厂]
spawnUnits: 盟军发电厂(addResources=资金:-800, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 触发
autoTrigger: if self.isControlledByAI() and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=800) and not self.resource(type="电力", greaterThan=0) and numberOfUnitsInTeam(withTag='盟军发电厂', lessThan=14, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-定点炮塔]
spawnUnits: 定点炮塔(addResources=资金:-600, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造定点炮塔
#spawnChance: 0.5
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='盟军兵营') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=600) and numberOfUnitsInTeam(withTag='定点炮塔', lessThan=6, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-爱国者导弹]
spawnUnits: 爱国者导弹(addResources=资金:-800, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造爱国者导弹
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='盟军兵营') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=800) and numberOfUnitsInTeam(withTag='爱国者导弹', lessThan=6, withinRange=500) and self.resource(type="电力",greaterThan=50)
resetCustomTimer: true


[hiddenAction_ai建造-巨炮]
spawnUnits: 巨炮(addResources=资金:-1800, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造巨炮
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='科技中心') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=1800) and numberOfUnitsInTeam(withTag='巨炮', lessThan=3, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-超时空传送仪]
spawnUnits: 超时空传送仪(addResources=资金:-3000, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 超时空传送仪
autoTrigger: if self.isControlledByAI() and self.timeAlive(laterThanSeconds=600) and self.hasUnitInTeam(withTag='科技中心') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=3000) and self.noUnitInTeam(withTag='超时空传送仪') and not self.hasFlag(id=3) and game.nukesEnabled()
resetCustomTimer: true


[hiddenAction_ai建造-天气控制器]
spawnUnits: 天气控制器(addResources=资金:-5000, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 天气控制器
autoTrigger: if self.isControlledByAI() and self.timeAlive(laterThanSeconds=600) and self.hasUnitInTeam(withTag='科技中心') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=5000) and self.noUnitInTeam(withTag='天气控制器') and not self.hasFlag(id=3) and game.nukesEnabled()
resetCustomTimer: true

[hiddenAction_初始化]
autoTriggerCheckRate: every4Frames
autoTrigger: if self.hasFlag(id=3)
addResources: unsetFlag = 3

[hiddenAction_开始建造]
autoTriggerOnEvent: queueItemAdded
alsoTriggerAction:开始建造2

[hiddenAction_开始建造2]
requireConditional: if self.resource(type="计数") == 0 and not self.hasFlag(id=3)
setResourcesWithLogic: 开始建造 = 1

[hiddenAction_取消建造]
autoTriggerOnEvent: queueItemCancelled
alsoTriggerAction:取消建造2

[hiddenAction_取消建造2]
requireConditional: if self.resource(type="计数") == 0 and not self.hasFlag(id=3)
setResourcesWithLogic: 取消建造 = 1

[hiddenAction_建造完成]
autoTrigger: if self.resource(type="计数") > 0 and self.resource(type="建造完成") == 0
setResourcesWithLogic: 建造完成 = 1

[hiddenAction_建造完成2]
autoTrigger: if self.resource(type="计数") == 0 and self.resource(type="建造完成") == 2
setResourcesWithLogic: 建造完成 = 0

[effect_土坑2]
xOffsetRelativeRandom: 80
yOffsetRelativeRandom: 80


[effect_炸毁]
image: ROOT:\共享文件\1类\炸毁.png
scaleFrom: 2.5
scaleTo: 2.5
total_frames: 8
animateFrameStart: 0
animateFrameEnd: 7
animateFrameSpeed: 0.2
#life: 600
xOffsetRelative	:  0
yOffsetRelative	:  -10
xOffsetRelativeRandom:  10
yOffsetRelativeRandom:  10
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: false
drawUnderUnits:false


[effect_炸毁2]
@copyFromSection: effect_炸毁
xOffsetRelative	:  40
yOffsetRelative	:  20
xOffsetRelativeRandom:  20


[effect_炸毁3]
@copyFromSection: effect_炸毁
xOffsetRelative	:  40
yOffsetRelative	:  -40
xOffsetRelativeRandom:  20


[effect_炸毁4]
@copyFromSection: effect_炸毁
xOffsetRelative	:  -40
yOffsetRelative	:  -40
xOffsetRelativeRandom:  20


[effect_炸毁5]
@copyFromSection: effect_炸毁
xOffsetRelative	:  -40
yOffsetRelative	:  20
xOffsetRelativeRandom:  20


[resource_计数]
displayName: 计数


[resource_ai计时]
displayName: ai计时


[template_zijin]
price: 3000
@global dianli: 40

[template_price]
price: 3000

[ai]
#buildPriority:100
useAsBuilder: true
#maxEachBase:1
#noneInBaseExtraPriority: 0.7
upgradedFrom: 盟军基地车
noneGlobalExtraPriority: 0.8
maxGlobal: 2
#ai_upgradePriority: 0.06