
[core]
name: 盟军发电厂
price: 0
maxHp: 750
mass: 10000
radius: 32

copyFrom: ROOT:\共享文件\3类\阵营建筑共同.template
tags: 原始护甲, 建筑轻甲, 建筑, 电力, 占领, 盟军发电厂, 可入侵, 空下, 非防御建筑, allied
displayText: Allied Power Plant
displayText_zh: 盟军发电厂
displayDescription: Can be upgraded for $500, adding 150 power(Require Allied Tech Center).\nFunds: -800\nPower: +200
displayDescription_zh: 资金花费：800\n电力提供：200\n升级＋150电力(需要：科技中心)
borrowResourcesWhileAlive: 电力=-200
buildSpeed: 0
selfBuildRate: 1s
isBuilding: true
footprint: -1,-1,1,1
constructionFootprint: -1,-1,1,1
fogOfWarSightRange: 20
effectOnDeath: CUSTOM:土坑3, CUSTOM:土坑2, CUSTOM:土坑, CUSTOM:炸毁, CUSTOM:漏电
soundOnDeath: ROOT:\音频\语音+音效\bpowdiea.wav, ROOT:\音频\语音+音效\bpowdieb.wav


[graphics]
icon_build: ROOT:盟军\单位图标\盟军发电厂.png
image:        盟军发电厂.png

imageScale:	0.8
image_offsetX:2
image_offsetY:-10


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false


[movement]
movementType: BUILDING


[arm_1]
x: 1
y: 10

hidden: if not self.hasFlag(id=0) or self.hasFlag(id=29)
drawOverBody: true
image_end: 盟军发电厂升级.png
image_end_teamColors: true


[action_1]
text: upgrade
text_zh: 升级
description: Can be upgraded for $500, adding 150 power (Requires Allied Tech Center).
description_zh: 升级后增加额外电量
price: 资金=500
isVisible: if not self.hasFlag(id=0) and self.hasUnitInTeam(withTag='科技中心')
buildSpeed: 15s
autoTrigger: if self.isControlledByAI() and self.resource(type="电力",lessThan=0) and self.resource(type="资金",greaterThan=500) and self.hasUnitInTeam(withTag='科技中心', incompleteBuildings=true) and not self.hasFlag(id=0)
allowMultipleInQueue: false
addResources: setFlag=0, 电力=150


[hiddenAction_2]
requireConditional: if self.hasFlag(id=0)
autoTriggerOnEvent: destroyed
addResources: 电力=-150


[hiddenAction_3]
autoTrigger: if not self.resource(type='入侵计时', empty=true) and not self.tags(includes='入侵停电')  
temporarilyAddTags: 入侵停电


[hiddenAction_4]
autoTrigger: if self.resource(type='入侵计时', empty=true) and self.tags(includes='入侵停电')  
temporarilyRemoveTags: 入侵停电


[hiddenAction_内部人员]
requireConditional: if self.globalTeamTags(includes='盟军')
autoTriggerOnEvent: destroyed
spawnUnits: 防卫大兵(offsetRandomX=20, offsetRandomY=20, skipIfOverlapping=true)


[hiddenAction_内部人员2]
requireConditional: if self.globalTeamTags(includes='苏联')
autoTriggerOnEvent: destroyed
spawnUnits: 动员兵(offsetRandomX=20, offsetRandomY=20, skipIfOverlapping=true)

[hiddenAction_新创建]
requireConditional: if not self.hasUnitInTeam(withTag = '盟军发电厂')
setResourcesWithLogic: 新建筑 = 1

[effect_炸毁]
image: ROOT:\共享文件\1类\炸毁.png
scaleFrom:2.5
scaleTo: 2.5
total_frames: 8
animateFrameStart: 0
animateFrameEnd: 7
animateFrameSpeed: 0.2
xOffsetRelative	:  5
yOffsetRelative	:  -5
xOffsetRelativeRandom:  5
yOffsetRelativeRandom:  5
fadeInTime: 0
fadeOut: false
drawUnderUnits:false
alwayStartDirAtZero: true


[effect_漏电]
image: ROOT:\共享文件\1类\漏电.png
scaleFrom: 1.02
scaleTo: 1.02
total_frames: 9
animateFrameStart: 0
animateFrameEnd: 8
animateFrameSpeed: 0.15
xOffsetRelative: 5
yOffsetRelative: 0
fadeInTime: 0
fadeOut: false
drawUnderUnits:false
alwayStartDirAtZero: true


[template_zijin]
price: 800
@global dianli: 200

[template_price]
price: 800

[ai]
buildPriority: 0.04
recommendedInEachBaseNum: 4
recommendedInEachBasePriorityIfUnmet: 0.25
noneInBaseExtraPriority: 0.4
maxEachBase: 14