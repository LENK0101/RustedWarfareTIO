
[core]
name: 苏联基地
price: 0
maxHp: 2500
mass: 100000
radius: 80

copyFrom: ROOT:\共享文件\3类\阵营建筑共同.template
tags: 原始护甲, 建筑重甲, 建筑, 苏联, 基地, 电力, 占领, 苏联基地, 可入侵, 空下, 非防御建筑, soviet
displayText: Soviet Construction Yard
displayText_zh: 苏联基地
displayDescription: Build Soviet buildings\nPower: +40
displayDescription_zh: 建造苏联建筑\n电力占用：40
isBuilding: true
footprint: -3,-1,4,2
#displayFootprint: -3,-1,4,2
constructionFootprint: -3,-1,4,2
fogOfWarSightRange: 26
numBitsOnDeath:100
canRepairBuildings: true
canRepairUnitsOnlyWithTags: 无
nanoRange: 99999
nanoRepairSpeed: 0
selfBuildRate: 0s
borrowResourcesWhileAlive: 电力=-40
armour: 99999
armourMinDamageToKeep: 1700
effectOnDeath: CUSTOM:土坑3*4, CUSTOM:土坑2*4, CUSTOM:土坑, CUSTOM:炸毁, CUSTOM:炸毁2, CUSTOM:炸毁3, CUSTOM:炸毁4, CUSTOM:炸毁5


[graphics]
image:       苏联基地.png

imageScale:	0.8
image_offsetX: 13
image_offsetY: -35
rotate_with_direction: false
repairEffect: NONE


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:  false
canAttackUnderwaterUnits: false


[movement]
movementType: NONE

[canBuild_1]
#@copyFromSection: canBuild_1
name: 苏联磁能反应炉
pos: 2
#tech: 1
#forceNano: true
isVisible: if self.resource(type='计数', equalTo=1) and self.hasFlag(id=0)
addResources: 计数=-1, ai计时=-99
price: 资金=600
isGuiBlinking: true


[canBuild_2]
name: 苏联矿厂
pos: 3
isVisible: if self.resource(type='计数', equalTo=2) and self.hasFlag(id=0)
addResources: 计数=-2, ai计时=-99
price: 资金=2000
isGuiBlinking: true


[canBuild_3]
name: 苏联兵营
pos: 4
isVisible: if self.resource(type='计数', equalTo=3) and self.hasFlag(id=0) 
addResources: 计数=-3, ai计时=-99
price: 资金=500
isGuiBlinking: true


[canBuild_4]
name: 苏联战争工厂
pos: 5
isVisible: if self.resource(type='计数', equalTo=4) and self.hasFlag(id=0)
addResources: 计数=-4, ai计时=-99
price: 资金=2000
isGuiBlinking: true


[canBuild_5]
name: 苏联机场
pos: 6
isVisible: if self.resource(type='计数', equalTo=5) and self.hasFlag(id=0)
addResources: 计数=-5, ai计时=-99
price: 资金=1000
isGuiBlinking: true


[canBuild_6]
name: 苏联船坞
pos: 7
isVisible: if self.resource(type='计数', equalTo=6) and self.hasFlag(id=0)
addResources: 计数=-6, ai计时=-99
price: 资金=1200
isGuiBlinking: true


[canBuild_7]
name: 宫殿
pos: 8
isVisible: if self.resource(type='计数', equalTo=7) and self.hasFlag(id=0)
addResources: 计数=-7, ai计时=-99
price: 资金=5000
isGuiBlinking: true


[canBuild_8]
name: 工业工厂
pos: 9
isVisible: if self.resource(type='计数', equalTo=8) and self.hasFlag(id=0)
isLocked: if self.hasUnitInTeam(withTag='工业工厂', incompleteBuildings=true)
isLockedMessage: Soviet Industrial Plant can only have one at a time!
isLockedMessage_zh: 工业工厂同时只能有一个!
addResources: 计数=-8, ai计时=-99
price: 资金=3000
isGuiBlinking: true


[canBuild_9]
name: 苏联维修站
pos: 10
isVisible: if self.resource(type='计数', equalTo=9) and self.hasFlag(id=0)
addResources: 计数=-9, ai计时=-99
price: 资金=900
isGuiBlinking: true


[canBuild_10]
name: 苏联核能发电炉
pos: 11
isVisible: if self.resource(type='计数', equalTo=10) and self.hasFlag(id=0)
addResources: 计数=-10, ai计时=-99
price: 资金=2000
isGuiBlinking: true


[canBuild_11]
name: 稍戒炮
pos: 12
isVisible: if self.resource(type='计数', equalTo=11) and self.hasFlag(id=2)
addResources: 计数=-11, ai计时=-99
price: 资金=400
isGuiBlinking: true


[canBuild_12]
name: 苏联战斗碉堡
pos: 13
isVisible: if self.resource(type='计数', equalTo=12) and self.hasFlag(id=2)
addResources: 计数=-12, ai计时=-99
price: 资金=600
isGuiBlinking: true


[canBuild_应急碉堡]
name: 苏联战斗碉堡2
pos: 0
#tech: 1
#forceNano: true
isVisible: if self.resource(type='碉堡计数', greaterThan=0)
addResources: 碉堡计数=-1
price: 资金=0
isGuiBlinking: true


[canBuild_13]
name: 高射炮
pos: 14
isVisible: if self.resource(type='计数', equalTo=13) and self.hasFlag(id=2)
addResources: 计数=-13, ai计时=-99
price: 资金=700
isGuiBlinking: true


[canBuild_14]
name: 电磁塔
pos: 15
isVisible: if self.resource(type='计数', equalTo=14) and self.hasFlag(id=2)
addResources: 计数=-14, ai计时=-99
price: 资金=1200
isGuiBlinking: true


[canBuild_15]
name: 苏联地锤防御装置
pos: 16
isVisible: if self.resource(type='计数', equalTo=15) and self.hasFlag(id=2)
addResources: 计数=-15, ai计时=-99
price: 资金=1800
isGuiBlinking: true


[canBuild_17]
name: 铁幕装置
pos: 18
isVisible: if self.resource(type='计数', equalTo=17) and self.hasFlag(id=2)
isLocked: if self.hasUnitInTeam(withTag='铁幕装置', incompleteBuildings=true)
isLockedMessage: Soviet Iron Curtain Device can only have one at a time!
isLockedMessage_zh: 铁幕装置同时只能有一个!
addResources: 计数=-17, ai计时=-99
price: 资金=3000
isGuiBlinking: true


[canBuild_18]
name: 核弹井
pos: 19
isVisible: if self.resource(type='计数', equalTo=18) and self.hasFlag(id=2)
isLocked: if self.hasUnitInTeam(withTag='核弹井', incompleteBuildings=true)
isLockedMessage: Soviet Tactical Nuke Silo can only have one at a time!
isLockedMessage_zh: 核弹井同时只能有一个!
addResources: 计数=-18, ai计时=-99
price: 资金=5000
isGuiBlinking: true


[action_1]
text: Undeploy
text_zh: 取消基地部署
description: Soviet Mobile Construction Vehicle
description_zh: 整理形成基地车
pos: 0.9
displayType: action
buildSpeed: 0.2s
isActive: if not self.globalTeamTags(includes='禁止基地取消部署') and self.queueSize(empty=true) 
isVisible: if not self.isControlledByAI()
addResources: setFlag=3
whenBuilding_triggerAction: 卖声
convertTo: 苏联基地车


[action_支持]
text: Support
text_zh: 支持类
description: Expand the list of support buildings
description_zh: 展开支持类建筑列表
pos: 1.1
displayType: rally
buildSpeed: 0s
isActive: if self.queueSize(empty=true)
autoTrigger: if self.lastConverted(withinSeconds=1)
isVisible: true
addResources: setFlag=0, unsetFlag=2, setFlag=3


[action_防御]
text: Defensive
text_zh: 防御类
description: Expand the list of defensive buildings
description_zh: 展开防御类建筑列表
pos: 1.2
displayType: rally
buildSpeed: 0s
isActive: if self.queueSize(empty=true)
isVisible: true
addResources: setFlag=2, unsetFlag=0, setFlag=3


[action_取消]
text: Cancel
text_zh: 取消
description: Cancel process
description_zh: 取消建造
pos: 0.8
displayType: none
buildSpeed: 0s
autoTrigger: if self.resource(type='ai计时', greaterThan=9) and self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true)
isLocked: if not self.resource(type='计数', greaterThan=0)
addResources: setFlag=3
setResourcesWithLogic: 取消建造 = 1
resourceAmount: 计数
resourceAmount_setValue: 0
alsoTriggerAction: ai计时2


[action_维修2]
addResources: setFlag=31, setFlag=3

[action_维修2取消]
addResources: unsetFlag=31, setFlag=3

[action_卖钱]
addResources: setFlag=30, setFlag=14, setFlag=3

[action_卖钱2]
addResources: unsetFlag=30, unsetFlag=14, setFlag=3


[action_建1]
textAddUnitName: 苏联磁能反应炉
descriptionAddFromUnit: 苏联磁能反应炉
descriptionAddUnitStats: 苏联磁能反应炉
displayType: none
pos: 2
buildSpeed: 6s
addResources: 计数=1
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=1) and self.hasFlag(id=0)
unitShownInUI: 苏联磁能反应炉
#ai_isHighPriority: true
ai_considerSameAsBuilding: 苏联磁能反应炉


[action_建2]
textAddUnitName: 苏联矿厂
descriptionAddFromUnit: 苏联矿厂
descriptionAddUnitStats: 苏联矿厂
displayType: none
pos: 3
buildSpeed: 10s
addResources: 计数=2
isLocked: if self.noUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=2) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
unitShownInUI: 苏联矿厂
ai_considerSameAsBuilding: 苏联矿厂


[action_建3]
textAddUnitName: 苏联兵营
descriptionAddFromUnit: 苏联兵营
descriptionAddUnitStats: 苏联兵营
displayType: none
pos: 4
buildSpeed: 6s
addResources: 计数=3
isLocked: if self.noUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=3) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
unitShownInUI: 苏联兵营
ai_considerSameAsBuilding: 苏联兵营


[action_建4]
textAddUnitName: 苏联战争工厂
descriptionAddFromUnit: 苏联战争工厂
descriptionAddUnitStats: 苏联战争工厂
displayType: none
pos: 5
buildSpeed: 20s
addResources: 计数=4
isLocked: if self.noUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
isLockedAlt: if self.noUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=4) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true) and self.hasUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
unitShownInUI: 苏联战争工厂
ai_considerSameAsBuilding: 苏联战争工厂


[action_建5]
textAddUnitName: 苏联机场
descriptionAddFromUnit: 苏联机场
descriptionAddUnitStats: 苏联机场
displayType: none
pos: 6
buildSpeed: 12s
addResources: 计数=5
isLocked: if self.noUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
isLockedMessage: Require Soviet Tesla Reactor
isLockedMessage_zh: 解锁条件: 苏联磁能反应炉
isLockedAlt: if self.noUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
isLockedAltMessage: Require Soviet Ore Refinery
isLockedAltMessage_zh: 解锁条件: 苏联矿厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=5) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true) and self.hasUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
unitShownInUI: 苏联机场
ai_considerSameAsBuilding: 苏联机场


[action_建6]
textAddUnitName: 苏联船坞
descriptionAddFromUnit: 苏联船坞
descriptionAddUnitStats: 苏联船坞
displayType: none
pos: 7
buildSpeed: 15s
addResources: 计数=6
isLocked: if self.noUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true)
isLockedMessage: Require Soviet Tesla Reactor
isLockedMessage_zh: 解锁条件: 苏联磁能反应炉
isLockedAlt: if self.noUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
isLockedAltMessage: Require Soviet Ore Refinery
isLockedAltMessage_zh: 解锁条件: 苏联矿厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=6) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联磁能反应炉', incompleteBuildings=true) and self.hasUnitInTeam(withTag='苏联矿厂', incompleteBuildings=true)
unitShownInUI: 苏联船坞
ai_considerSameAsBuilding: 苏联船坞


[action_建7]
textAddUnitName: 宫殿
descriptionAddFromUnit: 宫殿
descriptionAddUnitStats: 宫殿
displayType: none
pos: 8
buildSpeed: 50s
addResources: 计数=7
isLocked: if self.noUnitInTeam(withTag='苏联机场', incompleteBuildings=true)
isLockedMessage: Require Soviet Airfield
isLockedMessage_zh: 解锁条件: 苏联机场
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=7) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联机场', incompleteBuildings=true)
unitShownInUI: 宫殿
ai_considerSameAsBuilding: 宫殿


[action_建8]
textAddUnitName: 工业工厂
descriptionAddFromUnit: 工业工厂
descriptionAddUnitStats: 工业工厂
displayType: none
pos: 9
buildSpeed: 25s
addResources: 计数=8
isLocked: if self.noUnitInTeam(withTag='宫殿', incompleteBuildings=true)
isLockedMessage: Require Russian Palace
isLockedMessage_zh: 解锁条件: 宫殿
isLockedAlt: if self.hasUnitInTeam(withTag='工业工厂', factoryQueue=true)
isLockedAltMessage: Soviet Industrial Plant can only have one at a time!
isLockedAltMessage_zh: 工业工厂同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=8) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='宫殿', incompleteBuildings=true)
unitShownInUI: 工业工厂
ai_considerSameAsBuilding: 工业工厂


[action_建9]
textAddUnitName: 苏联维修站
descriptionAddFromUnit: 苏联维修站
descriptionAddUnitStats: 苏联维修站
displayType: none
pos: 10
buildSpeed: 12s
addResources: 计数=9
isLocked: if self.noUnitInTeam(withTag='苏联战争工厂', incompleteBuildings=true)
isLockedMessage: Require Soviet War Factory
isLockedMessage_zh: 解锁条件: 苏联战争工厂
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=9) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='苏联战争工厂', incompleteBuildings=true)
unitShownInUI: 苏联维修站
ai_considerSameAsBuilding: 苏联维修站


[action_建10]
textAddUnitName: 苏联核能发电炉
descriptionAddFromUnit: 苏联核能发电炉
descriptionAddUnitStats: 苏联核能发电炉
displayType: none
pos: 11
buildSpeed: 20s
addResources: 计数=10
isLocked: if self.noUnitInTeam(withTag='宫殿', incompleteBuildings=true)
isLockedMessage: Require Russian Palace
isLockedMessage_zh: 解锁条件: 宫殿
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=10) and self.hasFlag(id=0) and self.hasUnitInTeam(withTag='宫殿', incompleteBuildings=true)
unitShownInUI: 苏联核能发电炉
ai_considerSameAsBuilding: 苏联核能发电炉


[action_建11]
textAddUnitName: 稍戒炮
descriptionAddFromUnit: 稍戒炮
descriptionAddUnitStats: 稍戒炮
displayType: none
pos: 12
buildSpeed: 4s
addResources: 计数=11
isLocked: if self.noUnitInTeam(withTag='苏联兵营', incompleteBuildings=true)
isLockedMessage: Require Soviet Barracks
isLockedMessage_zh: 解锁条件: 苏联兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=11) and self.hasFlag(id=2)
unitShownInUI: 稍戒炮
ai_considerSameAsBuilding: 稍戒炮


[action_建12]
textAddUnitName: 苏联战斗碉堡
descriptionAddFromUnit: 苏联战斗碉堡
descriptionAddUnitStats: 苏联战斗碉堡
displayType: none
pos: 13
buildSpeed: 6s
addResources: 计数=12
isLocked: if self.noUnitInTeam(withTag='苏联兵营', incompleteBuildings=true)
isLockedMessage: Require Soviet Barracks
isLockedMessage_zh: 解锁条件: 苏联兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=12) and self.hasFlag(id=2)
unitShownInUI: 苏联战斗碉堡
ai_considerSameAsBuilding: 苏联战斗碉堡


[action_建13]
textAddUnitName: 高射炮
descriptionAddFromUnit: 高射炮
descriptionAddUnitStats: 高射炮
displayType: none
pos: 14
buildSpeed: 7s
addResources: 计数=13
isLocked: if self.noUnitInTeam(withTag='苏联兵营', incompleteBuildings=true)
isLockedMessage: Require Soviet Barracks
isLockedMessage_zh: 解锁条件: 苏联兵营
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=13) and self.hasFlag(id=2)
unitShownInUI: 高射炮
ai_considerSameAsBuilding: 高射炮


[action_建14]
textAddUnitName: 电磁塔
descriptionAddFromUnit: 电磁塔
descriptionAddUnitStats: 电磁塔
displayType: none
pos: 15
buildSpeed: 10s
addResources: 计数=14
isLocked: if self.noUnitInTeam(withTag='苏联机场', incompleteBuildings=true)
isLockedMessage: Require Soviet Airfield
isLockedMessage_zh: 解锁条件: 苏联机场
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=14) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='苏联机场', incompleteBuildings=true)
unitShownInUI: 电磁塔
ai_considerSameAsBuilding: 电磁塔


[action_建15]
textAddUnitName: 苏联地锤防御装置
descriptionAddFromUnit: 苏联地锤防御装置
descriptionAddUnitStats: 苏联地锤防御装置
displayType: none
pos: 16
buildSpeed: 18s
addResources: 计数=15
isLocked: if self.noUnitInTeam(withTag='宫殿', incompleteBuildings=true)
isLockedMessage: Require Russian Palace
isLockedMessage_zh: 解锁条件: 宫殿
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=15) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='宫殿', incompleteBuildings=true)
unitShownInUI: 苏联地锤防御装置
ai_considerSameAsBuilding: 苏联地锤防御装置


[action_建17]
textAddUnitName: 铁幕装置
descriptionAddFromUnit: 铁幕装置
descriptionAddUnitStats: 铁幕装置
displayType: none
pos: 18
buildSpeed: 30s
addResources: 计数=17
isLocked: if self.noUnitInTeam(withTag='宫殿', incompleteBuildings=true)
isLockedMessage: Require Russian Palace
isLockedMessage_zh: 解锁条件: 宫殿
isLockedAlt: if self.hasUnitInTeam(withTag='铁幕装置', factoryQueue=true)
isLockedAltMessage: Soviet Iron Curtain Device can only have one at a time!
isLockedAltMessage_zh: 铁幕装置同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=17) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='宫殿', incompleteBuildings=true)
unitShownInUI: 铁幕装置
ai_considerSameAsBuilding: 铁幕装置


[action_建18]
textAddUnitName: 核弹井
descriptionAddFromUnit: 核弹井
descriptionAddUnitStats: 核弹井
displayType: none
pos: 19
buildSpeed: 50s
addResources: 计数=18
isLocked: if self.noUnitInTeam(withTag='宫殿', incompleteBuildings=true)
isLockedMessage: Require Russian Palace
isLockedMessage_zh: 解锁条件: 宫殿
isLockedAlt: if self.hasUnitInTeam(withTag='核弹井', factoryQueue=true)
isLockedAltMessage: Soviet Tactical Nuke Silo can only have one at a time!
isLockedAltMessage_zh: 核弹井同时只能有一个!
isActive:  if not self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true) and self.resource(type='入侵计时', empty=true)
isVisible: if not self.resource(type='计数', equalTo=18) and self.hasFlag(id=2) and self.hasUnitInTeam(withTag='宫殿', incompleteBuildings=true)
unitShownInUI: 核弹井
ai_considerSameAsBuilding: 核弹井


[hiddenAction_初始状态]
autoTrigger: if not (self.hasFlag(id=0) or self.hasFlag(id=2))
addResources: setFlag=0, unsetFlag=2


[hiddenAction_应急碉堡]
autoTrigger: if self.globalTeamTags(includes='应急碉堡建')
removeGlobalTeamTags: 应急碉堡建
#showMessageToAllPlayers: 触发
addResources: 碉堡计数=3


[hiddenAction_应急碉堡-Ai]
autoTrigger: if self.isControlledByAI() and self.resource(type='碉堡计数', greaterThan=0)
addResources: 碉堡计数=-1
spawnUnits: 苏联战斗碉堡2(offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建立碉堡


[hiddenAction_自动部署]
autoTriggerOnEvent: created
playSoundAtUnit: ROOT:\音频\语音+音效\uplace.wav


[hiddenAction_Ai分基地限制]
requireConditional: if self.isControlledByAI() and self.hasUnitInTeam(withTag='基地')
autoTriggerOnEvent: created
addResources: setFlag=3
#showMessageToAllPlayers: 触发


[hiddenAction_Ai分基地限制2]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInTeam(withTag='基地', equalTo=1) and self.hasFlag(id=3)
addResources: unsetFlag=3
#showMessageToAllPlayers: 触发2


[hiddenAction_内部人员]
requireConditional: if self.globalTeamTags(includes='盟军')
autoTriggerOnEvent: destroyed
spawnUnits: 防卫大兵*2(offsetRandomX=50, offsetRandomY=50, skipIfOverlapping=true), 盟军工程师(offsetRandomX=20, offsetRandomY=20, skipIfOverlapping=true)


[hiddenAction_内部人员2]
requireConditional: if self.globalTeamTags(includes='苏联')
autoTriggerOnEvent: destroyed
spawnUnits: 动员兵*2(offsetRandomX=50, offsetRandomY=50, skipIfOverlapping=true), 苏联工程师(offsetRandomX=20, offsetRandomY=20, skipIfOverlapping=true)


[hiddenAction_ai设置]
autoTrigger: if self.isControlledByAI() and (not self.hasFlag(id=0) or not self.hasFlag(id=0) or not self.hasFlag(id=2))
addResources: setFlag=0, setFlag=1, setFlag=2


[hiddenAction_ai计时]
autoTrigger: if self.isControlledByAI() and self.resource(type='计数', greaterThan=0) and self.queueSize(empty=true)
addResources: ai计时=1
#showMessageToAllPlayers: 1
#存在未知bug


[hiddenAction_ai计时2]
autoTrigger: if self.resource(type='ai计时', lessThan=0)
#showMessageToAllPlayers: 2
resourceAmount: ai计时
resourceAmount_setValue: 0


[hiddenAction_ai建造-船坞]
spawnUnits: 苏联船坞引子-Ai
#showMessageToAllPlayers: 产生引子
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='苏联磁能反应炉') and self.hasUnitInTeam(withTag='苏联矿厂') and not self.hasUnitInTeam(withTag='苏联船坞引子') and numberOfUnitsInTeam(withTag='船坞', lessThan=2, withinRange=650)


[hiddenAction_ai建造-电厂]
spawnUnits: 苏联磁能反应炉(addResources=资金:-600, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 触发
autoTrigger: if self.isControlledByAI() and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=600) and not self.resource(type="电力", greaterThan=0) and numberOfUnitsInTeam(withTag='苏联磁能反应炉', lessThan=14, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-稍戒炮]
spawnUnits: 稍戒炮(addResources=资金:-400, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造稍戒炮
#spawnChance: 0.5
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='苏联兵营') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=400) and numberOfUnitsInTeam(withTag='稍戒炮', lessThan=6, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-高射炮]
spawnUnits: 高射炮(addResources=资金:-700, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造高射炮
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='苏联兵营') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=700) and numberOfUnitsInTeam(withTag='高射炮', lessThan=6, withinRange=500) and self.resource(type="电力",greaterThan=50)
resetCustomTimer: true


[hiddenAction_ai建造-苏联地锤防御装置]
spawnUnits: 苏联地锤防御装置(addResources=资金:-1800, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 建造巨炮
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='宫殿') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=1800) and numberOfUnitsInTeam(withTag='苏联地锤防御装置', lessThan=3, withinRange=500)
resetCustomTimer: true


[hiddenAction_ai建造-铁幕装置]
spawnUnits: 铁幕装置(addResources=资金:-3000, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 铁幕装置
autoTrigger: if self.isControlledByAI() and self.timeAlive(laterThanSeconds=600) and self.hasUnitInTeam(withTag='宫殿') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=3000) and self.noUnitInTeam(withTag='铁幕装置') and not self.hasFlag(id=3) and game.nukesEnabled()
resetCustomTimer: true


[hiddenAction_ai建造-核弹井]
spawnUnits: 核弹井(addResources=资金:-5000, offsetRandomX=500, offsetRandomY=500, gridAlign=true, skipIfOverlapping=true)
#showMessageToAllPlayers: 核弹井
autoTrigger: if self.isControlledByAI() and self.timeAlive(laterThanSeconds=600) and self.hasUnitInTeam(withTag='宫殿') and self.customTimer(laterThanSeconds=5) and self.resource(type='资金', greaterThan=5000) and self.noUnitInTeam(withTag='核弹井') and not self.hasFlag(id=3) and game.nukesEnabled()
resetCustomTimer: true


[hiddenAction_初始化]
autoTriggerCheckRate: every4Frames
autoTrigger: if self.hasFlag(id=3)
addResources: unsetFlag = 3

[hiddenAction_开始建造]
autoTriggerOnEvent: queueItemAdded
alsoTriggerAction:开始建造2

[hiddenAction_开始建造2]
requireConditional: if self.resource(type="计数") == 0 and not self.hasFlag(id=3)
setResourcesWithLogic: 开始建造 = 1

[hiddenAction_取消建造]
autoTriggerOnEvent: queueItemCancelled
alsoTriggerAction:取消建造2

[hiddenAction_取消建造2]
requireConditional: if self.resource(type="计数") == 0 and not self.hasFlag(id=3)
setResourcesWithLogic: 取消建造 = 1

[hiddenAction_建造完成]
autoTrigger: if self.resource(type="计数") > 0 and self.resource(type="建造完成") == 0
setResourcesWithLogic: 建造完成 = 1

[hiddenAction_建造完成2]
autoTrigger: if self.resource(type="计数") == 0 and self.resource(type="建造完成") == 2
setResourcesWithLogic: 建造完成 = 0


[effect_土坑2]
xOffsetRelativeRandom: 80
yOffsetRelativeRandom: 80


[effect_炸毁]
image: ROOT:\共享文件\1类\炸毁.png
scaleFrom: 2.5
scaleTo: 2.5
total_frames: 8
animateFrameStart: 0
animateFrameEnd: 7
animateFrameSpeed: 0.2
#life: 600
xOffsetRelative	:  0
yOffsetRelative	:  -10
xOffsetRelativeRandom:  10
yOffsetRelativeRandom:  10
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: false
drawUnderUnits:false


[effect_炸毁2]
@copyFromSection: effect_炸毁
xOffsetRelative	:  40
yOffsetRelative	:  20
xOffsetRelativeRandom:  20


[effect_炸毁3]
@copyFromSection: effect_炸毁
xOffsetRelative	:  40
yOffsetRelative	:  -40
xOffsetRelativeRandom:  20


[effect_炸毁4]
@copyFromSection: effect_炸毁
xOffsetRelative	:  -40
yOffsetRelative	:  -40
xOffsetRelativeRandom:  20


[effect_炸毁5]
@copyFromSection: effect_炸毁
xOffsetRelative	:  -40
yOffsetRelative	:  20
xOffsetRelativeRandom:  20


[resource_计数]
displayName: 计数


[resource_ai计时]
displayName: ai计时


[template_zijin]
price: 3000
@global dianli: 40

[template_price]
price: 3000


[resource_碉堡计数]
displayName: 碉堡计数


[ai]
#buildPriority:100
useAsBuilder: true
#maxEachBase:1
noneInBaseExtraPriority: 0.7
upgradedFrom: 苏联基地车
noneGlobalExtraPriority: 0.8
maxGlobal: 2
#ai_upgradePriority: 0.06